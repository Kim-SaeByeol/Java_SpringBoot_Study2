<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- JAVA와 연결할 Mapper 파일 설정 -->
<mapper namespace="kopo.poly.persistance.mapper.IMailMapper">

    <!-- 게시판 리스트 쿼리 -->
    <select id="getMailList" resultType="MailDTO">
        SELECT N.MAIL_SEQ, N.TITLE, N.TO_MAIL, N.CONTENTS, TO_CHAR(N.SEND_TIME, 'YYYY-MM-DD HH24:MI:SS')
        FROM MAIL_INFO N
        ORDER BY N.SEND_TIME DESC
    </select>

    <insert id="insertMailInfo" parameterType="MailDTO">
        INSERT INTO MAIL_INFO
            (
            MAIL_SEQ, TITLE, TO_MAIL, CONTENTS, SEND_TIME
            )
            VALUES(
                      (SELECT NVL(MAX(A.MAIL_SEQ),0)+1 FROM MAIL_INFO A),
                      #{title}, #{toMail}, #{contents}, SYSDATE
              )
    </insert>
</mapper>